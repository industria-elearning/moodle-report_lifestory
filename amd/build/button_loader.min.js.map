{"version":3,"file":"button_loader.min.js","sources":["../src/button_loader.js"],"sourcesContent":["/**\n * Controlador reutilizable para mostrar un loader y deshabilitar un botón mientras se procesa una acción.\n * Compatible con enlaces <a> o botones <button>.\n */\nexport const init = () => {\n    const buttons = document.querySelectorAll(\"[data-loader-text]\");\n\n    buttons.forEach(button => {\n        button.addEventListener(\"click\", e => {\n            if (button.classList.contains(\"btn-loading\")) {\n                e.preventDefault();\n                return;\n            }\n\n            e.preventDefault();\n\n            const loaderText = button.dataset.loaderText || \"Procesando...\";\n            const redirect = button.href || button.dataset.redirect;\n            const originalText = button.textContent.trim();\n            button.dataset.originalText = originalText;\n\n            // Mostrar loader\n            button.classList.add(\"btn-loading\");\n            button.setAttribute(\"aria-disabled\", \"true\");\n            button.style.pointerEvents = \"none\";\n            button.textContent = loaderText;\n\n            if (!redirect) {\n                return;\n            }\n\n            if (redirect.includes(\"action=csv\")) {\n                const iframe = document.createElement(\"iframe\");\n                iframe.style.display = \"none\";\n                iframe.src = redirect;\n                document.body.appendChild(iframe);\n\n                setTimeout(() => {\n                    button.classList.remove(\"btn-loading\");\n                    button.removeAttribute(\"aria-disabled\");\n                    button.style.pointerEvents = \"\";\n                    button.textContent = originalText;\n                    iframe.remove();\n                }, 500);\n            } else {\n                window.location.href = redirect;\n            }\n        });\n    });\n};\n"],"names":["document","querySelectorAll","forEach","button","addEventListener","e","classList","contains","preventDefault","loaderText","dataset","redirect","href","originalText","textContent","trim","add","setAttribute","style","pointerEvents","includes","iframe","createElement","display","src","body","appendChild","setTimeout","remove","removeAttribute","window","location"],"mappings":"+KAIoB,KACAA,SAASC,iBAAiB,sBAElCC,SAAQC,SACZA,OAAOC,iBAAiB,SAASC,OACzBF,OAAOG,UAAUC,SAAS,2BAC1BF,EAAEG,iBAINH,EAAEG,uBAEIC,WAAaN,OAAOO,QAAQD,YAAc,gBAC1CE,SAAWR,OAAOS,MAAQT,OAAOO,QAAQC,SACzCE,aAAeV,OAAOW,YAAYC,UACxCZ,OAAOO,QAAQG,aAAeA,aAG9BV,OAAOG,UAAUU,IAAI,eACrBb,OAAOc,aAAa,gBAAiB,QACrCd,OAAOe,MAAMC,cAAgB,OAC7BhB,OAAOW,YAAcL,WAEhBE,YAIDA,SAASS,SAAS,cAAe,OAC3BC,OAASrB,SAASsB,cAAc,UACtCD,OAAOH,MAAMK,QAAU,OACvBF,OAAOG,IAAMb,SACbX,SAASyB,KAAKC,YAAYL,QAE1BM,YAAW,KACPxB,OAAOG,UAAUsB,OAAO,eACxBzB,OAAO0B,gBAAgB,iBACvB1B,OAAOe,MAAMC,cAAgB,GAC7BhB,OAAOW,YAAcD,aACrBQ,OAAOO,WACR,UAEHE,OAAOC,SAASnB,KAAOD"}