define("report_lifestory/togglecategories",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;function rotateIcon(icon,expanded){icon&&(icon.style.transition="transform 0.2s ease",icon.style.transform=expanded?"rotate(90deg)":"rotate(0deg)")}_exports.init=()=>{const params=new URLSearchParams(window.location.search),userid=params.get("userid")||"0",courseid=params.get("id")||"all",STORAGE_KEY="history_student_ai_state_".concat(userid,"_").concat(courseid);let state={};try{state=JSON.parse(localStorage.getItem(STORAGE_KEY))||{}}catch{state={}}document.querySelectorAll(".toggle-category").forEach((button=>{const icons=button.querySelectorAll(".icon, .fa, i");if(icons.length>1)for(let i=0;i<icons.length-1;i++)icons[i].remove();const categoryId=button.dataset.categoryid,dataTarget=button.dataset.target;let categoryRows=dataTarget?document.querySelectorAll(dataTarget):[];dataTarget&&0!==categoryRows.length||!categoryId||(categoryRows=document.querySelectorAll("tr.cat_"+categoryId));const savedExpanded=state[categoryId],icon=button.querySelector(".icon, .fa, i");if(!1===savedExpanded)categoryRows.forEach((r=>r.style.display="none")),button.setAttribute("aria-expanded","false"),rotateIcon(icon,!1);else if(!0===savedExpanded)categoryRows.forEach((r=>r.style.display="")),button.setAttribute("aria-expanded","true"),rotateIcon(icon,!0);else{const visible=categoryRows.length>0&&"none"!==categoryRows[0].style.display;button.setAttribute("aria-expanded",visible?"true":"false"),rotateIcon(icon,visible)}button.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();const newExpanded=!("true"===button.getAttribute("aria-expanded"));categoryRows.forEach((r=>r.style.display=newExpanded?"":"none")),button.setAttribute("aria-expanded",newExpanded?"true":"false"),state[categoryId]=newExpanded,localStorage.setItem(STORAGE_KEY,JSON.stringify(state)),rotateIcon(icon,newExpanded)}))}))}}));

//# sourceMappingURL=togglecategories.min.js.map